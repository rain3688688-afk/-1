
    })
  })
};

// const supabase = createClient(...) // 真实项目用这个
const supabase = mockSupabase; // 预览用这个

const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));

// 简单图标组件 (避免引入外部库，保持单文件)
const Icons = {
  Lock: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>,
  ArrowRight: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>,
  Check: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>,
  Star: () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="none"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>
};

// ==========================================
// 1. 深度内容库 (基于你提供的文档)
// ==========================================

// 维度映射
const DIMENSIONS = [
  { id: 1, label: "确定感" }, { id: 2, label: "被需要" }, { id: 3, label: "掌控感" }, { id: 4, label: "被偏爱" },
  { id: 5, label: "精神共鸣" }, { id: 6, label: "自由感" }, { id: 7, label: "安全距离" }, { id: 8, label: "秩序感" },
];

// 插屏引导语 (增强沉浸感)
const INTERSTITIALS = {
  16: "表层意识正在剥离...\n准备进入情绪暗涌区",
  32: "正在穿越心理防御机制...\n即将触碰灵魂图腾",
  40: "最后深潜...\n真实的自我轮廓正在浮现",
};

// 48道题目数据 (完整录入)
const QUESTIONS = [
  // Part 1
  { id: 1, text: "周末下午，伴侣突然失联了3个小时，发消息也没回。那一刻，你最真实的反应是？", options: [{ t: "下意识地去翻之前的聊天记录，看是不是我说错话了？这种不知道发生什么的感觉最折磨人。", v: 1 }, { t: "挺好的，刚好没人管我。我可以专心做自己的事，不用一直切出去回消息。", v: 6 }, { t: "第一反应是推测原因，准备等联系上后，哪怕不吵架，也要问清楚去向，防止下次再这样。", v: 3 }, { t: "心里会有点堵得慌。也不是多大事，就是觉得如果他够在意我，怎么舍得让我空等这么久？", v: 4 }] },
  { id: 2, text: "伴侣最近工作压力极大，回到家情绪很低落，坐在沙发上一言不发。此时你心里最真实的念头是？", options: [{ t: "看着挺心疼的。我不一定能帮上忙，但至少给他倒杯水、切点水果，让他知道身边有人照顾着。", v: 2 }, { t: "他现在应该很烦，不想说话。那我就识趣点，躲远点玩手机，别去撞枪口，等他缓过来了再说。", v: 7 }, { t: "这种死气沉沉的沉默让我很难受。我还是希望能聊聊，哪怕只说几句，让我知道他脑子里到底在想什么也好。", v: 5 }, { t: "我比较在意接下来的安排：今晚是就在家吃还是出去？既然心情不好，原本的计划还作数吗？", v: 8 }] },
  { id: 3, text: "因为一件琐事发生了激烈的争吵，甚至有些冷场。你心里那个过不去的点主要是？", options: [{ t: "吵架可以，但能不能别用那种冷冰冰的态度对我？那种好像随时要放弃我的感觉，比吵架本身更让我害怕。", v: 1 }, { t: "情绪发泄完了吗？完了我们就复盘一下。到底谁对了谁错了，以后这种情况按谁的来？别稀里糊涂就过去了。", v: 8 }, { t: "看他气得脸色发白或者不说话的样子，我突然就心软了。输赢不重要，我甚至想先低头哄哄他。", v: 2 }, { t: "这种无法沟通的局面让我很烦躁。如果不立刻把问题解决掉、翻篇，我就没法继续安心做别的事。", v: 3 }] },
  { id: 4, text: "你冷不丁冒出一个有点奇怪的脑洞，随口讲给伴侣听。此时你最期待/最真实的反应是？", options: [{ t: "哪怕他没听懂，但只要他愿意放下手机、转过身来认真听我说完这些废话，我就觉得很满足，因为他在乎我。", v: 4 }, { t: "他能瞬间接住这个梗，甚至还能顺着我的逻辑延伸出新的观点。那一刻我会觉得“天哪，这个世界上只有你懂我”。", v: 5 }, { t: "我不强求他懂，更别为了迎合我而硬聊。我最舒服的状态是：我说我的，你听你的，哪怕观点完全不同也没关系。", v: 6 }, { t: "其实我通常只敢说一半。对于那些特别真实、特别私人的怪想法，我还是习惯自己留着，怕说出来对方接不住。", v: 7 }] },
  { id: 5, text: "伴侣想看你的手机，或者询问你过去的详细情感经历。你的本能反应是？", options: [{ t: "哪怕没秘密，我也很反感。这是我的隐私，每个人都该有自己的小世界，这种被审视的感觉让我很不舒服。", v: 6 }, { t: "随便看。甚至如果你看了能更安心、更信任我，那我求之不得。我不希望我们之间有任何猜疑。", v: 1 }, { t: "看可以，但要公平。如果我也能看你的，或者我们也交换秘密，那就没问题。规则对等就行。", v: 8 }, { t: "看可以，但我不想被误解。那些都是过去的事了，我不希望你只盯着几个名字或事件，就片面地定义现在的我。", v: 5 }] },
  { id: 6, text: "伴侣偶尔有些迷糊，犯了个不大不小的错（比如买错了东西、记错了时间）。你下意识的第一反应通常是？", options: [{ t: "下意识地去兜底。看他搞砸了，我第一反应不是生气，而是直接上手帮他善后。", v: 2 }, { t: "觉得被忽视了。第一反应是：“你是不是没把我的事放心上？”如果你足够在意我，就不该犯这种错。", v: 4 }, { t: "复盘原因。我会本能地想知道哪个环节出了问题。这种不在计划内的失误让我很难受，我想确保下次别再发生。", v: 3 }, { t: "无所谓。“谁还没个犯错的时候，多大点事。”我也不希望如果我犯错了对方揪着不放。大家都轻松点最好。", v: 7 }] },
  { id: 7, text: "谈到“未来”这个话题时，什么情况最让你感到不安？", options: [{ t: "没有计划，没有具体打算，就说“顺其自然”。这种没规划的日子让我很没底。", v: 8 }, { t: "他的态度不坚定。如果他表现出一丝犹豫，或者说“以后的事以后再说”，我就会怀疑他是不是没打算长久。", v: 1 }, { t: "一想到未来几十年都要和一个人绑死，还要面对柴米油盐的琐碎，我就本能地想逃，怕自己会慢慢枯萎。", v: 6 }, { t: "我怕未来大家都很忙，各过各的。让我觉得我们不是爱人，而是正在变成两个合租的陌生人。", v: 2 }] },
  { id: 8, text: "当你自己情绪崩溃、非常脆弱的时候，你最希望对方做什么？", options: [{ t: "别一直问“怎么了”、“别哭了”。就当没看见，让我自己躲一会儿，等我好了再出来。", v: 7 }, { t: "不需要讲道理，也不需要给建议。只要抱着我，让我感觉“这一刻你也一样难过”，我就被治愈了。", v: 5 }, { t: "帮我分析一下现在的烂摊子该怎么收场。与其哄我，不如帮我一起把那个搞崩我的问题解决掉。", v: 3 }, { t: "就算我无理取闹，也请先站在我这边。别跟我讲客观公正，这时候我只需要偏袒。", v: 4 }] },
  { id: 9, text: "到了纪念日或生日，如果伴侣准备的礼物（或安排）让你觉得有点失望，那个失望的点通常是？", options: [{ t: "觉得不够用心。并不是要多贵，而是这东西随便谁都能买到，完全看不出我是那个被特殊对待的人。", v: 4 }, { t: "觉得没意义。他送的东西跟我完全不搭界，说明他根本不了解我最近在关注什么，也不懂我的喜好。", v: 5 }, { t: "觉得不实用或浪费。这种华而不实的东西，破坏了我们的开销计划，还不如买点家里正缺的实用的。", v: 8 }, { t: "觉得不平衡。我总是习惯把你的喜好记在备忘录里，但你对我却一无所知。我难过你没有给我同等的在意。", v: 2 }] },
  { id: 10, text: "带伴侣去参加你的朋友聚会。整个过程中，你最舒服的状态是？", options: [{ t: "“连体婴”模式。我不希望把他晾在一边。哪怕跟别人聊天，我也希望我们是站在一起的，或者眼神时不时能对上。", v: 1 }, { t: "“得体”模式。我比较在意他能不能融入。希望他表现大方、说话得体，别冷场也别出格。", v: 3 }, { t: "“放养”模式。最好是各玩各的。我聊我的天，他找他的乐子，不用我时刻照顾他的情绪。", v: 6 }, { t: "“低调”模式。正常社交就好，千万别让我们成为全场的焦点。", v: 7 }] },
  { id: 11, text: "两个人一起出去旅行，最容易让你心里炸毛的瞬间是？", options: [{ t: "由于对方磨蹭或出错，导致赶不上车/景点关门。这种因为人为失误搞砸计划的感觉，会让我瞬间暴躁。", v: 3 }, { t: "行程变来变去。一会儿要去这一会儿要去那，完全没有章法。我需要知道今天到底要干嘛，而不是在街上瞎晃。", v: 8 }, { t: "被行程表催着走。出来玩就是为了放松，如果非要打卡、几点必须起床，那这就不是旅行，是军训。", v: 6 }, { t: "同路不同频。我想跟他感叹一下风景的震撼，他却一脸漠然，或者只关心等会儿吃什么。这比一个人旅行更寂寞。", v: 5 }] },
  { id: 12, text: "同居或长相处时，伴侣有一些让你看不惯的生活习惯（比如乱丢袜子、熬夜）。你通常会怎么想？", options: [{ t: "“没有规矩。”家里必须有基本的整洁标准，如果大家都随心所欲，这个家就乱套了，我没法忍受混乱的环境。", v: 8 }, { t: "“他不重视我。”我都说过好几次了让他改，他还是这样。是不是我说的话他根本没放在心上？", v: 1 }, { t: "“别管我就行。”只要他不强迫我也跟着他乱，或者别反过来管我，我懒得因为这点破事吵架。", v: 6 }, { t: "“还是我来吧。”骂归骂，最后还是我默默帮他收拾了。", v: 2 }] },
  { id: 13, text: "伴侣无意中提起了一个优秀的异性朋友，言语间带着欣赏。你心里的第一反应是？", options: [{ t: "酸溜溜的。哪怕知道没事，心里也膈应：你为什么要当着我的面夸别人？难道我不够好吗？", v: 4 }, { t: "警铃大作。我会开始对比：那个人是不是比我更适合他？我是不是有被替代的风险？这种危机感让我很不安。", v: 1 }, { t: "想搞清楚界限。我不反感交友，但我需要确认他们现在到底是什么关系？有没有越界？这一切是否在可控范围内？", v: 3 }, { t: "无所谓、装傻。只要别影响我就行。我不太想深究他们的过去，也不想表现得像个嫉妒狂，太难看了。", v: 7 }] },
  { id: 14, text: "在一起久了，关系进入一种“左手摸右手”的平淡模式，每天除了吃饭睡觉没别的话题。你会觉得？", options: [{ t: "这是一种慢性死亡。如果没有了思想交流，没有了火花，这段关系只剩下一个空壳，哪怕日子安稳，也让我觉得索然无味。", v: 5 }, { t: "有点失落。以前他总是围着我转，现在他回家就玩手机，好像我这个人在不在家对他来说都没差别了。", v: 2 }, { t: "求之不得。终于到了这一步！不用每天费劲维系激情，各干各的事，这种空气般的相处才是最舒服的。", v: 6 }, { t: "这很正常。激情总会褪去，现在这种稳定的、可预测的生活节奏，反而让我觉得很踏实，日子就是这样过的。", v: 8 }] },
  { id: 15, text: "你有一个非常痴迷的小爱好（比如拼模型、追星、某种运动），但伴侣完全不感兴趣。你希望他的态度是？", options: [{ t: "别干涉我。这是我的自留地，请你也离远点。不需要你理解，只要别在我玩的时候在旁边指手画脚就行。", v: 7 }, { t: "尊重我的投入。我花在这个上面的时间、金钱是经过计算的，我有分寸。别总质疑我不务正业。", v: 3 }, { t: "试着懂我一点。你可以不玩，但如果你能明白为什么这个东西能打动我，我会很开心。", v: 5 }, { t: "陪我一起玩。哪怕你不喜欢，我也希望你能为了我试着参与一下。看着你陪我做我喜欢的事，我会觉得很幸福。", v: 4 }] },
  { id: 16, text: "大吵一架终于和好了。为了让这页彻底翻过去，你最需要的一个“收尾动作”是？", options: [{ t: "反复确认。我可能会忍不住再问几次：“你真的不生气了吗？”“我们真的没事了吗？”直到听到肯定的回答。", v: 1 }, { t: "某种补偿行为。比如给他做顿好吃的，或者对他格外好一点。", v: 2 }, { t: "彻底不提。既然和好了，就赶紧回归正常，把这尴尬的一页揭过去最好。", v: 7 }, { t: "得到一个小惊喜。不管谁对谁错，如果他能在这个时候给我买个小礼物或者带我吃顿好的就好了。", v: 4 }] },
  // Part 2
  { id: 17, text: "在一段关系里，最让你感到心慌、不踏实的那种时刻，其实是？", options: [{ t: "不知道下一秒会发生什么。这种内心悬空的感觉最折磨人，我宁愿你直接判我死刑，也不要让我猜你到底还爱不爱我。", v: 1 }, { t: "感觉透不过气。不管我走到哪、干什么，好像都有双眼睛盯着我，那种被严密包裹的窒息感，让我只想逃。", v: 6 }, { t: "事情脱离了轨迹。明明说好的事突然变了，或者局面完全乱套了，这种无法把握方向的感觉让我非常焦躁。", v: 3 }, { t: "像在演独角戏。无论我表达什么，都像掉进了黑洞，没有任何反馈。这种两个人面对面、心却连不上的孤独感，比激烈的争吵更让我绝望。", v: 5 }] },
  { id: 18, text: "当你在感情里觉得特别委屈时，脑海里那个挥之不去的念头是？", options: [{ t: "“好像我没什么价值。”我做了这么多，你却觉得理所当然，甚至根本不需要。那种觉得自己很多余的感觉最伤人。", v: 2 }, { t: "“我就知道会受伤。”只要一靠近就会有风险，我刚才那一瞬间的脆弱被你无视了，这让我本能地想立刻缩回去。", v: 7 }, { t: "“这不公平。”为什么总是我在妥协？为什么规则对我不适用？这种不对等的付出让我觉得非常憋屈。", v: 8 }, { t: "“原来我和别人没区别。”我以为对你来说我是特别的，但刚才那个细节告诉我，我并没有被你放在那个例外的位置上。", v: 4 }] },
  { id: 19, text: "你理想中最好的爱，给你的直接感觉应该是？", options: [{ t: "轻松。没有压力，没有强制要求。我想粘你的时候就粘，想一个人待着你也觉得没问题，不用时刻紧绷着。", v: 6 }, { t: "踏实。不管发生什么，我都清楚地知道你不会走。那种心里有底、不用患得患失的感觉，最让我舒服。", v: 1 }, { t: "默契。是一种不用费劲解释的轻松。我可以把脑子里最真实、甚至最奇怪的想法直接抛给你，不用担心你接不住。", v: 5 }, { t: "清晰。我们知道未来去哪，也知道现在该干嘛。一切都在计划中稳步推进，这种井井有条的感觉最好。", v: 3 }] },
  { id: 20, text: "当伴侣非常用力地黏着你、时刻都要和你在一起时，你的真实感受是？", options: [{ t: "很踏实。这说明你真的很依赖我。我很享受这种“被你完全信任、完全依靠”的感觉，这证明了我在你生活里是不可替代的。", v: 2 }, { t: "很想躲。太近了，这种高密度的亲密让我觉得不自在，甚至是种打扰。我需要一点时间回血，别逼太紧。", v: 7 }, { t: "有点烦。亲密可以，但要有分寸。如果连我的工作和正常生活节奏都被打乱了，我会觉得你很不懂事。", v: 8 }, { t: "很受用。嘴上可能说“烦死了”，但心里其实暗爽。这种非我不可的劲儿，最能证明你爱我。", v: 4 }] },
  { id: 21, text: "两个人坐在一起不说话时，你心里的真实活动是？", options: [{ t: "很难受。如果连话都懒得说，那我们在一起还有什么意思？这种精神上的断连，让我觉得我们像陌生人。", v: 5 }, { t: "很慌张。我会忍不住猜：他为什么不说话？是不是生气了？是不是对我厌倦了？这种未知让我坐立难安。", v: 1 }, { t: "很舒服。各玩各的手机，互不干扰，这种松弛感才是最高级的相处。", v: 6 }, { t: "很想找点事做。我不喜欢这种不知道该干嘛的冷场。与其尴尬地坐着，不如找个话题或者安排点事，打破这个僵局。", v: 3 }] },
  { id: 22, text: "如果你在这段关系里付出了很多，你最害怕的结果是？", options: [{ t: "怕你是真的不需要。不怕累，但我怕我给你的东西，对你来说是个负担，或者是可有可无的废品。", v: 2 }, { t: "怕这只是我的一厢情愿。感情是双向的，如果只有我一个人在投入，那这就不是爱，是消耗。", v: 8 }, { t: "怕你把这当成理所应当。我对你好是因为我爱你，但如果你连一点特殊的感动都没有，我会瞬间心寒。", v: 4 }, { t: "怕被赖上。我怕我一旦开了头，你就会索取更多，我不想因此背上某种很重的义务。", v: 7 }] },
  { id: 23, text: "当听到“永远”这个词的时候，你下意识的反应是？", options: [{ t: "松了一口气。虽然知道未来很难说，但我现在就是太需要这句话了。它能压住我心里所有的不安。", v: 1 }, { t: "压力好大。还没发生的事就先锁死，这让我觉得很沉重。比起承诺“永远”，我更希望“当下开心就好”。", v: 6 }, { t: "听听就行。别光说好听的，关键看你怎么做。没有具体行动支撑的“永远”，对我来说就是一张空头支票。", v: 3 }, { t: "很多余。真正的契合是不需要用时间来担保的。如果我们真的同频，“永远”就是一个自然而然的结果。", v: 5 }] },
  { id: 24, text: "在激烈的争吵中，最让你感到绝望、甚至想放弃的一瞬间是？", options: [{ t: "是他推开我的时候。当他说“不用你管”或者“离我远点”时，我觉得自己像个被丢弃的垃圾。", v: 2 }, { t: "是他开始胡搅蛮缠的时候。当逻辑失效，沟通变成纯粹的情绪发泄，没有任何道理可讲，我觉得这架吵得毫无意义。", v: 8 }, { t: "是他站在我对立面的时候。哪怕我有错，但当你表示帮理不帮亲的时候，我觉得全世界都背叛了我。", v: 4 }, { t: "是他逼我立刻说话的时候。你越逼问“你说话啊”，我越想把自己封闭起来。那种被逼到死角的窒息感，最让我绝望。", v: 7 }] },
  { id: 25, text: "哪怕此时此刻什么都没发生，但只要想到这件事，你就会觉得非常有安全感：", options: [{ t: "我知道你会坚定地站在我这边。不管发生什么风雨，我都清楚地知道你不会权衡利弊，也不会动摇。", v: 1 }, { t: "我知道一切都在计划内。我们的财务、未来规划都是清晰可见的，没有那些乱七八糟的突发状况来打乱生活。", v: 3 }, { t: "我知道我是不可替代的。不是生活上的依赖，而是我能给你别人给不了的快乐或支撑，我在你生命有独特位置。", v: 2 }, { t: "我知道我随时可以做自己。我不需要为了维持关系而伪装或讨好，在你面前我不用戴面具。", v: 6 }] },
  { id: 26, text: "如果回想一段失败的感情，最让你觉得“意难平”或者“很受伤”的点可能是？", options: [{ t: "“我居然不是特别的。”原来我费尽心思去爱，最后在你眼里，我和前任、和其他人也没什么两样。", v: 4 }, { t: "“我们从未真正交流过。”哪怕在一起很久，你也没懂过我哪怕一次。我们像两个住在同一个屋檐下的陌生人。", v: 5 }, { t: "“付出没有回报。”我投入了那么多时间和精力，最后却是一笔烂账，这种严重的不对等让我觉得很亏。", v: 8 }, { t: "“我不该全盘托出。”我后悔把自己最脆弱的一面展示给你看，结果成了你后来攻击我的武器。", v: 7 }] },
  { id: 27, text: "你会因为什么事情而产生强烈的嫉妒心或占有欲？", options: [{ t: "当他遇到麻烦却不找我时。明明我是你最亲近的人，你却去找了外人解决。", v: 2 }, { t: "当他对谁都很好的时候。如果你的温柔没有门槛，那它在我这里就一文不值。", v: 4 }, { t: "当他有事瞒着我时。我不一定要干涉，但我必须知情，被蒙在鼓里让我抓狂。", v: 3 }, { t: "当他和别人聊得更嗨时。看到他和别人聊那些跟我聊不起来的话题，还两眼放光，我会觉得属于我的领地被侵犯了。", v: 5 }] },
  { id: 28, text: "伴侣出差或不在家，留你一个人独处一周。你的真实感受是？", options: [{ t: "像放假一样爽。终于不用照顾别人的情绪，不用配合别人的时间。我想几点睡几点睡，这种完全属于自己的时间太珍贵了。", v: 6 }, { t: "逐渐开始慌张。没人说话，家里太安静，我会开始忍不住看手机，期待他发消息过来，确认他还在意我。", v: 1 }, { t: "非常自在。我本来就需要很多独处时间来充电。这种互不打扰的状态，反而让我觉得我们的关系更健康了。", v: 7 }, { t: "有点无所适从。我习惯了把你放在优先级里，时刻想着你的事。突然只需要顾我自己，这种轻飘飘、没重量的感觉，反而让我觉得生活特别不真实。", v: 2 }] },
  { id: 29, text: "如果伴侣做了这件事，你会瞬间下头，甚至考虑分手？", options: [{ t: "言而无信。说好的事变卦，承诺的不兑现。如果连基本的契约精神都没有，这日子没法过。", v: 8 }, { t: "拒绝沟通。当我想聊聊问题，你却说“想太多”或者直接回避。这种拒绝进入我内心的态度，是我的死穴。", v: 5 }, { t: "制造混乱。总是惹麻烦让我收拾烂摊子，或者做事毫无章法搞得生活一团糟，这种“猪队友”我带不动。", v: 3 }, { t: "权衡利弊。如果在关键时刻，你犹豫了，或者为了别的东西牺牲了我的利益，那我绝对不会原谅。", v: 4 }] },
  { id: 30, text: "如果给你自己写一份“恋爱使用说明书”，你最希望标注的核心法则是？", options: [{ t: "“请坚定地选择我。”别犹豫，别摇摆，让我看到你选择我的决心，而不是总让我猜。", v: 1 }, { t: "“请允许我做自己。”别打着“为你好”的名义来改造我，爱我就请接受我原本的样子，包括我的缺点。", v: 6 }, { t: "“请看见我的付出。”看见我的付出，看见我的辛苦。别把一切都当成空气，夸我一句有那么难吗？", v: 2 }, { t: "“请给我一点时间。”别一上来就掏心掏肺，也别逼我马上回应。给我点时间，我才能慢慢打开。", v: 7 }] },
  { id: 31, text: "如果让你用一个词来定义你理想中的“关系形态”，你希望你们是？", options: [{ t: "合伙人。账目分明，分工明确，大家遵守同一个规则，为了共同的未来高效努力。", v: 8 }, { t: "船长与领航员。有明确的方向，有问题能迅速解决。无论风浪多大，这艘船必须在我们的控制之中。", v: 3 }, { t: "灵魂伴侣。哪怕一句话不说，眼神一对就知道对方在想什么。这种不需要磨合的默契，是我唯一的追求。", v: 5 }, { t: "两条平行的河。我们流向同一个大海，但我们有各自的河道。既有交集，又互不吞没，保持各自的完整。", v: 6 }] },
  { id: 32, text: "在你看来，一个人爱你的最高级表现是？", options: [{ t: "例外。他对世界冷漠，唯独对我不一样。这种“排他性”的温柔，才是最高级的爱。", v: 4 }, { t: "托底。无论我变成什么样，或者闯了什么祸，我知道他永远会站在我身后，不会抛弃我。", v: 1 }, { t: "依赖。他愿意把最脆弱、最无助的一面展示给我看，只让我一个人照顾他，这说明他完全把心交给了我。", v: 2 }, { t: "尊重。他从不强迫我改变，也不窥探我的隐私。他懂得站在安全线以外守护我，这种分寸感最打动我。", v: 7 }] },
  // Part 3
  { id: 33, text: "如果要把你向往的亲密关系画成一幅画，它最像什么？", options: [{ t: "深深扎进土里的树根。无论地表风雨多大，地下永远紧紧纠缠，谁也拔不走。", v: 1 }, { t: "两朵飘在天上的云。我们在同一片天空，偶尔重叠，偶尔分开，聚散都随风，轻盈且自由。", v: 6 }, { t: "一条笔直的高速公路。视野开阔，路标清晰，我们握着方向盘，全速驶向同一个终点。", v: 3 }, { t: "两面互相照映的镜子。我看着你，就能看见最深处的自己。这种无声的映照，就是最深的懂得。", v: 5 }] },
  { id: 34, text: "如果要把自己比喻成一种动物，在爱人面前，你更像？", options: [{ t: "温顺的大金毛。我不需要做什么惊天动地的事，你随时感受到陪伴和暖意，我就觉得很满足。", v: 2 }, { t: "被驯服的小狐狸。世上有千千万万只狐狸，但我才对你来说是独一无二的。我只认你这一个“驯养员”。", v: 4 }, { t: "屯松果的松鼠。我喜欢未雨绸缪，一点点把我们的窝填满，规划好过冬的粮食。这种踏实感，是我爱你的方式。", v: 8 }, { t: "林间的小鹿。我生性敏感，如果你愿意站在原地安静地等，我会慢慢试探着靠近你。", v: 7 }] },
  { id: 35, text: "闭上眼，你觉得最让你感到安稳的那个空间是？", options: [{ t: "暴雨夜的屋子。外面狂风大作，屋内灯火通明。你在身边，门窗紧闭，这就是全世界最安全的地方。", v: 1 }, { t: "巨大的落地窗。视野通透，没有围栏。我不希望被墙壁困住，我需要随时能走出去的呼吸感。", v: 6 }, { t: "深夜书房。安静，私密，只有书和思想。我们可以一整晚不睡觉，只谈论灵魂，这是精神的庇护所。", v: 5 }, { t: "私有王国。关上门，这里就是我们的国度。外面的混乱无效，只有我们制定的规则。", v: 3 }] },
  { id: 36, text: "如果关系出现危机，你觉得那场景最像什么？", options: [{ t: "荒原。我拼命呼喊，想要付出，却发现周围空无一人，我的爱变成了没有回声的荒草。", v: 2 }, { t: "沼泽。我被拽住了，越挣扎陷得越深。那种无法抽身的黏腻感，是我最大的噩梦。", v: 7 }, { t: "废墟。原本搭建好的规则、承诺全部崩塌，满地狼藉，一切都失去了原本的逻辑。", v: 8 }, { t: "大卖场。我被放在货架上，和别人打折出售。那种廉价感和可替代感，会瞬间摧毁我。", v: 4 }] },
  { id: 37, text: "如果“誓言”是一个具体的物品，你希望它是什么？", options: [{ t: "磐石。够重、够硬、搬不走。誓言不该是轻飘飘的话，而是一块压在那里的石头，以此镇住生活中所有的变数。", v: 1 }, { t: "风铃。悦耳，但不沉重。风来时它会响，风走时它静止。它美在当下的回应，而不是永久的束缚。", v: 6 }, { t: "契约。白纸黑字。它代表的不是浪漫，而是两个清醒的成年人，在理智状态下达成的、不可违背的守则。", v: 3 }, { t: "潮汐。是引力，不是努力。月亮不需要对大海发誓，潮水也会如约而至。这种不言自明的必然性，才是誓言。", v: 5 }] },
  { id: 38, text: "你最喜欢的亲密关系，它的“温度”应该是？", options: [{ t: "滚烫的 100°C。我喜欢那种沸腾的热情，那种全心全意扑上去的炙热，哪怕会被烫伤也在所不惜。", v: 2 }, { t: "微凉的 20°C。像秋天的风，清爽、不黏人。既不冷漠，也不让人觉得燥热难耐，这才是最长久的。", v: 7 }, { t: "恒温的 26°C。我不要忽冷忽热，我要的是稳定。不管是春夏秋冬，永远保持在这个最舒适的刻度。", v: 8 }, { t: "只暖一人的 37°C。它是隐秘的、私有的，是只有我才有资格触碰的特权。", v: 4 }] },
  { id: 39, text: "如果爱是一件必须随身携带的物品，你觉得它最像？", options: [{ t: "贴身的护身符。平时可能感觉不到它的存在，但遇到危险或不安时，摸到它就在那里。", v: 1 }, { t: "降噪耳机。戴上它，世界的嘈杂瞬间消失，只能听到我们想听的旋律。", v: 5 }, { t: "瑞士军刀。精密、锋利、多功能。不管生活抛来什么乱七八糟的难题，我们都能拿它解决。", v: 3 }, { t: "一张空白机票。没有目的地，没有返程日。爱给了我底气，让我去探索更广阔的世界。", v: 6 }] },
  { id: 40, text: "如果有一天真的要分开，你希望那是？", options: [{ t: "燃尽。我像蜡烛一样流干了最后一滴泪，直到再也没有东西可以给你了，我才甘心离场。", v: 2 }, { t: "退潮。没有激烈的争吵，只是自然而然地退去。水面恢复平静，像什么都没发生过一样。", v: 7 }, { t: "清算。我们坐下来，把账算清，把话说开。有一个明确的句号，而不是一个潦草的省略号。", v: 8 }, { t: "绝版。我走之后，你会永远怀念我，因为你再也遇不到像我这样对你好的人了。", v: 4 }] },
  { id: 41, text: "你最喜欢的恋爱氛围，像哪种天气？", options: [{ t: "多云有风。空气是流动的，云是散漫的。没有暴晒的太阳，也没有压抑的雨，清清爽爽，适合散步。", v: 6 }, { t: "初雪。世界突然变得很安静，只剩下白色。这种纯粹、浪漫、又有点稀缺的氛围，最让我心动。", v: 4 }, { t: "晴朗无云。能见度极高，一眼能看到地平线。没有突如其来的雷阵雨，一切都清晰、明朗、可预测。", v: 8 }, { t: "深夜雷雨。窗外狂风暴雨，我们躲在屋里。这种与世隔绝、只有我们俩相依为命的深刻感，最让我着迷。", v: 5 }] },
  { id: 42, text: "如果你闭上眼触摸“爱”，手感应该是？", options: [{ t: "晒热的石头。厚实、干燥、有温度。它并不柔软，但有一种沉甸甸的分量。", v: 1 }, { t: "湿软的陶泥。柔软、依恋。它会填满我指缝的每一处空隙，完全顺应我的力度。", v: 2 }, { t: "流动的溪水。清凉、无重力。它流经我的皮肤，带来触感却不带来负担。", v: 7 }, { t: "紧绷的缰绳。粗糙、有力、有摩擦感。它连接着前方的力量，握住它，我就能控制方向。", v: 3 }] },
  { id: 43, text: "你觉得一段好的亲密关系，闻起来应该像？", options: [{ t: "薄荷或海盐。清冽、透气。吸进去能让肺部扩张，而不是那种甜腻到让人头晕的香水味。", v: 6 }, { t: "草莓尖尖。是那第一口咬下去的甜，带着露水，是特供的、精选的、只留给我的那部分。", v: 4 }, { t: "刚晒干的棉被。干净、干燥、阳光的味道。没有发霉的阴影，只有一种井井有条的生活气息。", v: 8 }, { t: "旧书页/焚香。沉静、悠长。不是为了取悦感官，而是能让人瞬间静下来，闻到时间的味道。", v: 5 }] },
  { id: 44, text: "你希望爱人是哪种光源？", options: [{ t: "壁炉里的火。它需要我不停地添柴，但它能照亮整个屋子。我是那个守护火种的人。", v: 2 }, { t: "灯塔。它是固定的。不管我航行到哪里，只要回头看，那一束光永远在那个位置扫射，从未熄灭。", v: 1 }, { t: "月光。它是温柔的，但也是清冷的。它照亮我，但不会像正午的太阳那样灼伤我。", v: 7 }, { t: "手里的火把。它不靠天赐，而是靠我亲手点燃。我不祈求天亮，我要亲自为你劈开黑暗、照亮前路。", v: 3 }] },
  { id: 45, text: "如果把与爱人的相处节奏比作一段旋律，你希望它是？", options: [{ t: "时钟的声音。滴答滴答，精准、规律。我们按时吃饭，按时睡觉，按部就班地走完这一生。", v: 8 }, { t: "随口的哼唱。没有固定的曲调，也不为了表演。就像散步时随口哼出的小调，断断续续、轻轻松松。", v: 6 }, { t: "山谷里的回音。你发出的每一个声音，无论多微弱，都能在我这里得到回应。因为我们也正好想唱同一首歌。", v: 5 }, { t: "为你独奏。聚光灯打在你身上，而我在为你演奏。那一刻，全世界都是背景音，只有我们是彼此的主角。", v: 4 }] },
  { id: 46, text: "如果爱必须伴随一种痛，你宁愿是？", options: [{ t: "生长痛。像骨骼拉伸一样，虽然酸痛，但说明我们在付出、在羁绊，关系是成长的。", v: 2 }, { t: "钝痛。哪怕关系变得乏味、沉重，也好过那种“不知道明天你还在不在”的剧烈撕裂痛。", v: 1 }, { t: "幻痛。哪怕分开了，你也像我身体的一部分。但我宁愿隔着距离怀念，也不愿靠太近互相伤害。", v: 7 }, { t: "剥离痛。像撕开粘在身上的面具和伪装。那种把最真实的软肋赤裸裸暴露给你的恐惧和疼痛，是我们抵达灵魂深处的代价。", v: 5 }] },
  { id: 47, text: "如果要把你们共度的时间比作一样东西，它应该是？", options: [{ t: "流沙。抓得越紧流得越快，不如摊开手掌。让它自然流淌，顺其自然。", v: 6 }, { t: "沙漏。时间是可控的，哪怕流完了，我们也有能力把它倒过来，重新开始下一轮。", v: 3 }, { t: "琥珀。把最美的那一瞬间封存起来，永远晶莹剔透，不被外界的灰尘侵蚀。", v: 4 }, { t: "年轮。一圈一圈，扎扎实实。不管发生什么，每一年都会留下一圈清晰的印记。", v: 8 }] },
  { id: 48, text: "最后，请凭直觉填空：爱是______。", options: [{ t: "定数。是万物流变的世界里，唯一不会更改、也不会撤回的那个答案。", v: 1 }, { t: "认出。是我们在嘈杂的茫茫人海里，精准地辨认出——彼此是唯一的同类。", v: 5 }, { t: "成全。是我们并不互相捆绑，却因此在彼此身边，拥有了更广阔的天空。", v: 6 }, { t: "治愈。是看见了你的破碎，而我甘愿成为那贴唯一有效的药。", v: 2 }] },
];

// 深度结果库 (Answer 2.0)
const RESULTS = {
  1: {
    title: "确定感",
    keyword: "风暴守夜人",
    quote: "万物皆流变，而我只要一种绝对的定数。",
    accent: "#9CA3AF", // 灰色系，代表稳重
    sections: [
      { 
        t: "你的亲密底色", 
        c: "在亲密关系中，你核心的情感诉求是“稳定与可预期”。\n\n相较于浪漫的轰轰烈烈，你更看重凡事有交代、件件有着落。这种清晰、可靠的互动模式，是你构建安全感的基石。\n\n这背后潜藏着你对不确定性的极度敏感。你所有的追问与确认，本质上都是为了在流动的关系中寻找一个稳定的锚点，反复确认自己不可替代。" 
      },
      { 
        t: "你的光：核心天赋", 
        c: "✦ 稳定的情感支撑力：你是关系中的定海神针，不会因短期波动轻易放弃，能提供最可依赖的港湾。\n✦ 纯粹的忠诚度：你的爱具有极强的排他性，认定即终身，拒绝模糊的“骑驴找马”。\n✦ 主动的修复力：面对裂痕，你倾向于解决问题而非逃避，始终以“延续稳定”为目标。" 
      },
      { 
        t: "你的影：隐性挑战", 
        c: "✦ 对模糊信号过度敏感：对方的沉默或延迟回应，容易被你解读为“被厌倦”或“不爱了”。\n✦ 压抑需求的懂事：因恐惧成为负担，你常以“体谅”为名刻意隐藏不安，长期导致自我消耗。\n✦ 预设灾难：受怕失去的恐惧驱动，你习惯做负面预设，难以全然享受当下的快乐。" 
      },
      { 
        t: "给爱你的TA (沟通指南)", 
        c: "1. 我的追问不是找茬：当我问“去哪了”时，只是被不安包裹。不用讲道理，抱抱我就好。\n2. 报备是我的定心丸：不要求秒回，但忙之前说一句“晚点找你”，就能让我心安。\n3. 请坚定地偏向我：在我和别人之间，请本能地护着我。任何犹豫在我眼里都会变成“我不重要”的信号。" 
      },
      { 
        t: "自我温柔与重塑", 
        c: "从依恋视角看，你对确定感的渴求可能源于童年照顾者不稳定的回应模式。这种不可预测的环境让你时刻紧绷神经。\n\n你可以试着把“锚”抛回自己手里：\n1. 练习事实归因：对方沉默可能只是累了，而不是厌倦你。\n2. 建立爱的韧性：相信真正的联结不会因为一次延迟回应就崩塌。\n3. 自我安抚：当你自身的快乐账户足够充盈，就不会再过度依赖对方的情绪转账。" 
      },
      { 
        t: "祝福", 
        c: "愿你在世事浮沉中，遇见一个懂你敏感、护你不安的人。更愿你修炼出一颗稳稳的内心——最坚实的依靠从不是别人的承诺，而是自己给的底气。" 
      }
    ]
  },
  2: {
    title: "被需要",
    keyword: "付出型守护",
    quote: "没有你，我只是一片废墟。",
    accent: "#F59E0B", // 暖橙色
    sections: [
      { 
        t: "你的亲密底色", 
        c: "你爱的语言是实打实的付出。对你而言，爱是“我能为你做什么”，是“我的存在让你少操心”。\n\n你的底色里藏着一种“付出才值得被爱”的认知。被依赖让你觉得踏实，而一旦对方不需要你，你就会感到空落，甚至怀疑自己是否重要。这并非控制欲，而是你通过“被需要”来确认自己在关系中不可替代的价值。" 
      },
      { 
        t: "你的光：核心天赋", 
        c: "✦ 靠谱的务实支撑：比起漂亮话，你更愿意行动。工作卡壳时出主意，生活忙乱时扛琐事，你是最踏实的后盾。\n✦ 敏锐的温情：你能捕捉对方没说出口的需求，疲惫时的一杯水、尴尬时的解围，让关系满是温度。\n✦ 清醒的互惠：你不一味盲目，清楚感情需要你来我往，维护着关系的平衡。" 
      },
      { 
        t: "你的影：隐性挑战", 
        c: "✦ 价值感绑定：你容易把“他需不需要我”等同于“我重不重要”。一旦他独立解决问题，你反而会失落。\n✦ 不敢求助：明明期待被照顾，却怕给对方压力。嘴上说“没事我能行”，心里却积攒委屈。\n✦ 过度承担：怕他累着，把所有活都揽过来，最终让自己陷入“越付出越累”的恶性循环。" 
      },
      { 
        t: "给爱你的TA (沟通指南)", 
        c: "1. 让我帮忙是爱意：当我主动分担时，别拒绝。你的接受是对我价值的肯定。\n2. 向我求助是认可：你不必假装万能，偶尔说一句“我搞不定，陪陪我”，比甜言蜜语更让我安心。\n3. 看见我的付出：当我觉得做得太多时，抱住我告诉我“你需要的是我这个人，而不是我的付出”，这对我最重要。" 
      },
      { 
        t: "自我温柔与重塑", 
        c: "这可能源于你童年“懂事才被爱”的经历。你习惯了用照顾别人来证明价值。但你要知道，你本身就值得被爱。\n\n1. 练习“不付出也安心”：哪怕什么都不做，你的存在本身就很珍贵。\n2. 坦然示弱：试着说“我也需要照顾”，这不会让你变得麻烦，只会让爱双向流动。\n3. 多元价值：在工作、爱好中找寻成就感，不把价值感全部压在亲密关系上。" 
      },
      { 
        t: "祝福", 
        c: "愿你遇见一个人，珍惜你的付出，也主动为你分担疲惫。愿你不再靠“有用”换取存在感，哪怕什么都不做，也能坦然相信自己值得被好好爱着。" 
      }
    ]
  },
  3: {
    title: "掌控感",
    keyword: "同频掌舵人",
    quote: "我抛开了所有理智，只求你结束我的痛苦。",
    accent: "#3B82F6", // 蓝色
    sections: [
      { 
        t: "你的亲密底色", 
        c: "你对亲密关系的核心需求是：可预期、可协同。你渴望的不是控制对方，而是像两个共掌舵的船长，提前校准航向。\n\n模糊的界限和反复的态度是你眼里的隐患。你常常被迫成为关系里的“大人”，独自扛起理顺关系的责任。你真正想要的是双向协作，是始终站在同一边的笃定，而不是让你一个人面对无序的恐慌。" 
      },
      { 
        t: "你的光：核心天赋", 
        c: "✦ 清晰的梳理力：一眼看穿矛盾核心，擅长把模糊的界限和期待说清楚，让关系在明确框架里前行。\n✦ 务实的突破力：面对卡点不逃避，行动力强，总能带着关系突破瓶颈。\n✦ 靠谱的托底：有你在，对方不用慌张找方向，因为你已经铺好了“一起走下去”的底气。" 
      },
      { 
        t: "你的影：隐性挑战", 
        c: "✦ 对无序的焦虑：一旦对方态度反复或做事没计划，你会比常人更慌乱，本能地想“抓得更紧”。\n✦ 独自掌舵的疲惫：习惯了扛起所有责任，身心俱疲却不敢放手，怕一松劲关系就乱了。\n✦ 理性掩盖情绪：你太擅长解决问题，以至于常忽略自己的委屈，忘了自己也需要被安慰。" 
      },
      { 
        t: "给爱你的TA (沟通指南)", 
        c: "1. 我不是想控制：当我提议聊聊，只是想把关系捋顺，不用猜来猜去。\n2. 我要的是合作感：你可以有自己的节奏，但请告诉我，不要让我觉得是我一个人在硬撑。\n3. 允许我不解决问题：如果我说累了，请不要分析对错，单纯陪陪我就好。" 
      },
      { 
        t: "自我温柔与重塑", 
        c: "这种对掌控的执念，可能源于童年无序环境下的生存本能。你习惯了自己站出来建立秩序以抵御混乱。\n\n1. 接纳适度失控：关系不是精密仪器，偶尔的节奏错位反而能增加弹性。\n2. 放下全能责任：试着把担子分出去，真正稳固的关系是互相搭把手。\n3. 允许自己不懂事：承认无力不是软弱，你也需要有人接住你的情绪。" 
      },
      { 
        t: "祝福", 
        c: "愿你遇见一个能和你并肩扛事的人，不用再让你独自做那个“负责全局的大人”。往后余生，既有掌舵的底气，也有被照顾的福气。" 
      }
    ]
  },
  4: {
    title: "被偏爱",
    keyword: "唯一例外",
    quote: "你要永远为你驯服的东西负责。",
    accent: "#EC4899", // 粉色
    sections: [
      { 
        t: "你的亲密底色", 
        c: "你渴求的是一份“独一份的例外感”。你会本能地对比：他对别人和对我是否有差别？\n\n这并非小气，而是你需要通过这些差别待遇，抓住“我在你心里有独属位置”的笃定。你最怕的不是他对别人好，而是他对所有人都一样好。这份“例外感”是你安全感的锚点，一旦稀释，你的情绪就会瞬间绷紧。" 
      },
      { 
        t: "你的光：核心天赋", 
        c: "✦ 深情且坚定：一旦认定，你的爱是纯粹且排他的，让对方清晰感受到被珍视。\n✦ 细腻的洞察：能捕捉别人忽略的细节，记得他的喜好、察觉他的情绪，让关系充满温度。\n✦ 推动真诚：你的认真会带动对方坦诚，逼着彼此直面内心，让关系越走越近。" 
      },
      { 
        t: "你的影：隐性挑战", 
        c: "✦ 对差别对待极度敏感：对方对别人多一份耐心，你心里的天平就会倾斜。\n✦ 过度求证的内耗：容易反复琢磨他的一句话，陷入“他到底在不在乎我”的自我消耗。\n✦ 防御性退缩：一旦感觉不再特别，你会下意识收回深情，以免真心错付。" 
      },
      { 
        t: "给爱你的TA (沟通指南)", 
        c: "1. 我要的是独一份：不用昂贵礼物，但记得我随口提的喜好，这种用心最让我安心。\n2. 别说我想太多：我的敏感只是因为太在乎。先抱抱我，比讲道理管用。\n3. 主动表达偏爱：偶尔直白说一句“你在我心里不一样”，能赶走我所有的不安。" 
      },
      { 
        t: "自我温柔与重塑", 
        c: "这往往源于童年“在意没被优先回应”的经历。你拼命寻找偏爱，是想补上曾经的遗憾。\n\n1. 接纳敏感：不用骂自己矫情，你的情绪没有错。\n2. 自我偏爱：别总等别人证明，先主动宠爱自己。想吃就吃，想做就做。\n3. 直白表达：不用让对方猜，直接告诉他“希望你优先考虑我”，这是对自己的负责。" 
      },
      { 
        t: "祝福", 
        c: "愿你遇见明目张胆的偏爱，有人把你放在心尖上。更愿你自带底气，不用依赖别人的特殊对待，也能笃定自己值得所有美好。" 
      }
    ]
  },
  5: {
    title: "精神共鸣",
    keyword: "灵魂契合",
    quote: "我们相遇在精神的旷野，无需言语便已相通。",
    accent: "#8B5CF6", // 紫色
    sections: [
      { 
        t: "你的亲密底色", 
        c: "你核心的需求是灵魂层面的同频共振。日常的寒暄无法满足你，你渴望的是“你一句话戳中我心事”的默契。\n\n没有精神交流的关系对你来说像空壳。你对浅层关系有本能的疏离感，你怕的不是没有话题，而是话题永远停留在琐事表面。你寻找的是那个能听懂你潜台词、接住你奇思妙想的人。" 
      },
      { 
        t: "你的光：核心天赋", 
        c: "✦ 思想共振：你带给对方的不只是爱情，更是共同拓展认知的可能，让关系保持生命力。\n✦ 深层共情：你懂得真正的倾听，能读懂背后的情绪，让对方感到被“完全懂了”。\n✦ 持续焕新：思维的碰撞让你们的关系永远有聊不完的话题，不会陷入枯燥。" 
      },
      { 
        t: "你的影：隐性挑战", 
        c: "✦ 浅层关系低耐受：长期停留在琐事寒暄会让你感到窒息，想要抽离。\n✦ 将“不理解”等同于“不在意”：对方没跟上你的思维，容易被你解读为距离。\n✦ 精神洁癖：一旦对方观点或价值观与你错位，你对关系的期待会迅速冷却。" 
      },
      { 
        t: "给爱你的TA (沟通指南)", 
        c: "1. 你的真实回响最珍贵：不一定要懂深奥理论，但请认真听我说完，并分享你的真实感受。\n2. 聊“无用”的话题是靠近：当我和你聊抽象话题时，是想和你触碰彼此内心更深的地方。\n3. 别敷衍我：哪怕你说“我没想过，但觉得有道理”，都比一句“想那么多干嘛”要好得多。" 
      },
      { 
        t: "自我温柔与重塑", 
        c: "你对共鸣的执着，可能源于童年“想法无人能懂”的孤独。你太清楚没人懂的滋味，所以把“懂”当成了爱的标尺。\n\n1. 允许灵魂多元栖息：不用强求伴侣满足你所有精神需求，书本、朋友也是很好的出口。\n2. 发现日常的连接：哪怕是沉默坐着的安心，也是一种连接，不一定非要深刻的对谈。\n3. 接纳深度需求：你的思考力是天赋，不是矫情。你值得被懂，但不必强求所有人同频。" 
      },
      { 
        t: "祝福", 
        c: "愿你遇见共赴精神旷野的伙伴。也愿你在无人完全懂你的时刻，坚信你的思考本身就是最珍贵的礼物，无需向谁证明。" 
      }
    ]
  },
  6: {
    title: "自由感",
    keyword: "自在的风",
    quote: "我爱你，却不愿用爱束缚你。",
    accent: "#38BDF8", // 天蓝色
    sections: [
      { 
        t: "你的亲密底色", 
        c: "你核心的需求是“在爱里守住自我”。靠近不难，难的是不用时刻黏在一起、不用事事报备。\n\n你愿意投入，但必须保留一块完全属于自己的空间。一旦被过度关注或要求，你的本能反应是退后。这并非不爱，而是怕在关系里弄丢自己。好的关系对你来说是：我需要时你在，我想独处时你不扰。" 
      },
      { 
        t: "你的光：核心天赋", 
        c: "✦ 让人舒展的松弛感：你不要求对方秒回或报备，让对方感到安心做自己，没有压抑。\n✦ 清晰的边界感：你尊重自己的空间，也不越界干涉别人，让关系保持轻盈。\n✦ 自我负责：你习惯自己消化情绪，不给关系增添沉重的负担。" 
      },
      { 
        t: "你的影：隐性挑战", 
        c: "✦ 对束缚的本能抗拒：对方一点点的过度关注，都会触发你的警觉，容易被误解为冷漠。\n✦ 习惯封闭：你太擅长独立，常忘了对方也渴望参与你的世界，让对方觉得走不进你心里。\n✦ 清淡表达：你不喜欢浓烈的仪式感，这容易让对方感受不到你的在意，陷入自我怀疑。" 
      },
      { 
        t: "给爱你的TA (沟通指南)", 
        c: "1. 我需要独处以便充电：这绝不是冷落你。等我整理好自己，会带著更踏实的心意回来。\n2. 别用时刻在线检验爱：秒回和报备不是爱的证明，舒适的节奏才是。\n3. 主动报备是把你放进计划：当我告诉你我的安排，是希望你能接住我的节奏，而不是为了申请批准。" 
      },
      { 
        t: "自我温柔与重塑", 
        c: "这源于你童年“怕失去自我”的经历。因为不得不听话，你学会了在心里划线来保护自己。\n\n1. 接纳边界需求：需要独处不是缺点，是你保护自我的方式。\n2. 温柔划线：不用等越界了才后退，主动说“我想留一小时做自己的事”，对方其实很愿意配合。\n3. 适度敞开：不用完全透明，但偶尔说一句“我现在需要静一静”，比直接消失要温柔得多。" 
      },
      { 
        t: "祝福", 
        c: "愿你始终保有做自己的勇气。愿你遇见懂你节奏的人，你们是并行的光，各自有轨道，却能相互照亮。在爱里自在呼吸，在自我里闪闪发光。" 
      }
    ]
  },
  7: {
    title: "安全距离",
    keyword: "审慎的观察者",
    quote: "待人如执烛，太近灼手，太远暗生。",
    accent: "#10B981", // 绿色
    sections: [
      { 
        t: "你的亲密底色", 
        c: "你的需求是“稳妥试探的安心”。你不是冷淡，只是心里自带一层“安全缓冲带”。\n\n你的亲密节奏里藏着审慎：先观察、确认，直到笃定“值得托付”才卸下防备。急于拉近关系的行为会触发你的自我保护。你对态度的要求是“宁缺毋滥”，一旦认定，便比谁都长情。" 
      },
      { 
        t: "你的光：核心天赋", 
        c: "✦ 慎重长情的定心丸：不轻易开始，但一旦选择便全心投入，是关系里最稳的依靠。\n✦ 亲疏有度：你能拿捏“刚刚好”的距离，让彼此在亲密中保留独立，活得舒展。\n✦ 克制稳健：你不会把负面情绪随意甩给对方，总能用理性稳住节奏，避免内耗。" 
      },
      { 
        t: "你的影：隐性挑战", 
        c: "✦ 节奏错位的孤独：你的“慢”常被误解为“不上心”，导致真心被错怪。\n✦ 被催后的退缩：只要对方急于推进，你就会下意识后退，让关系越走越远。\n✦ 观察期的内耗：总想着“再看看”，越观察越不敢迈步，把关系困在原地。" 
      },
      { 
        t: "给爱你的TA (沟通指南)", 
        c: "1. 我的慢是负责：别催我。我在认真掂量，想把关系走稳，不想草率开始。\n2. 别逼我说话：如果你用指责逼我交代想法，我会关上心门。请温柔地听我说完。\n3. 靠谱比盛大重要：一直没变的态度、说到做到的承诺，比轰轰烈烈的示爱更能打动我。" 
      },
      { 
        t: "自我温柔与重塑", 
        c: "你对距离的执着，源于童年“靠近即受伤”的经历。你学会了不轻易伸手就不被推开。\n\n1. 接纳自己的节奏：你的慢是对关系的认真。真正适合你的人会等你。\n2. 小步敞开：不用一步到位。从分享小情绪开始，试着一点点打开自己。\n3. 直白需求：告诉对方你需要时间确认，清晰的表达能减少误会，让你慢慢放下焦虑。" 
      },
      { 
        t: "祝福", 
        c: "愿你遇见一个不催你交卷的人，愿意陪你慢慢来。愿有人读懂你慢热背后的赤诚，等你摸清所有温暖的细节，再把你拉进门。" 
      }
    ]
  },
  8: {
    title: "秩序感",
    keyword: "关系架构师",
    quote: "好的关系，是一起把日子过成有章法的温柔。",
    accent: "#6366F1", // 靛蓝色
    sections: [
      { 
        t: "你的亲密底色", 
        c: "你是关系的共建者。你打心底不信“随缘”，认定长期关系必须扎根于坦诚沟通和明确共识。\n\n你怕够了混乱：猜忌、悬而未决的矛盾让你焦虑。你需要的是愿意一起共建规则的伙伴：对齐彼此的位置、节奏和未来。你要的不是冷冰冰的条款，而是两人并肩把日子过稳的笃定。" 
      },
      { 
        t: "你的光：核心天赋", 
        c: "✦ 化繁为简：擅长把混乱的相处捋顺，将模糊边界转化为清晰共识，避开内耗。\n✦ 主动破局：遇事不冷战，愿意主动牵头沟通，不把矛盾留到隔夜。\n✦ 长远共建：自带长远视角，不沉溺当下，而是从现实出发规划未来，让关系稳步扎根。" 
      },
      { 
        t: "你的影：隐性挑战", 
        c: "✦ 对模糊零容忍：对方态度暧昧或回避沟通，会让你立刻焦虑，难以踏实。\n✦ 忽略情绪缓冲：急于解决问题，有时忘了对方需要的只是安慰，而非方案。\n✦ 易失耐心：若对方长期回避坦诚交流，你会因反复消耗而迅速下头。" 
      },
      { 
        t: "给爱你的TA (沟通指南)", 
        c: "1. 坦诚是踏实：我不是较真，只是想和你少些内耗。愿意商量规则是被尊重的证明。\n2. 别回避：长时间的“顺其自然”会耗光我的安全感。请不要让我在混沌里消耗。\n3. 请认真对待沟通：当我提议聊聊，不是要审判谁，而是想把误会捋清。你的面对会让我信心倍增。" 
      },
      { 
        t: "自我温柔与重塑", 
        c: "这源于童年“没个准数”的慌张。你学会了自己找章法来抵御混乱。\n\n1. 接纳秩序需求：你对清晰的渴求是保护关系的珍贵能力，不是死板。\n2. 分清问题与情绪：给彼此缓冲空间。先接住情绪，再聊方案。\n3. 允许留白：只要看到对方的诚意，偶尔慢一点、没答案也没关系，不一定要逼出结果。" 
      },
      { 
        t: "祝福", 
        c: "愿你遇见不回避问题的同行者，愿意和你一起把话说透、把日子捋顺。愿你的清晰与坚持成为关系最长久的底气。" 
      }
    ]
  }
};

// ==========================================
// 2. 视觉组件库
// ==========================================

const StarBackground = () => (
  <div className="fixed inset-0 z-0 overflow-hidden pointer-events-none">
    <div className="absolute inset-0 bg-[#0B0E14]" />
    <div className="absolute top-0 left-0 w-full h-full opacity-30 animate-pulse" 
         style={{
           backgroundImage: 'radial-gradient(circle at 50% 50%, rgba(255,255,255,0.1) 1px, transparent 1px)',
           backgroundSize: '40px 40px'
         }} 
    />
    <div className="absolute w-[500px] h-[500px] bg-purple-900/20 rounded-full blur-[100px] top-[-100px] left-[-100px] animate-blob" />
    <div className="absolute w-[500px] h-[500px] bg-blue-900/20 rounded-full blur-[100px] bottom-[-100px] right-[-100px] animate-blob animation-delay-2000" />
  </div>
);

const ProgressBar = ({ current, total }) => (
  <div className="w-full max-w-md mx-auto mb-8">
    <div className="flex justify-between text-xs text-gray-500 mb-2 font-mono">
      <span>{String(current).padStart(2, '0')}</span>
      <span>{String(total).padStart(2, '0')}</span>
    </div>
    <div className="h-[1px] bg-gray-800 w-full relative">
      <div 
        className="absolute top-0 left-0 h-full bg-white transition-all duration-500 ease-out"
        style={{ width: `${(current / total) * 100}%` }}
      />
    </div>
  </div>
);

// ==========================================
// 3. 主程序逻辑
// ==========================================

export default function InnerEchoApp() {
  const [view, setView] = useState('welcome'); // welcome, quiz, interstitial, calculating, paywall, result
  const [qIndex, setQIndex] = useState(0);
  const [scores, setScores] = useState({ 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0 });
  const [resultId, setResultId] = useState(null);
  const [code, setCode] = useState('');
  const [error, setError] = useState('');
  const [interstitialText, setInterstitialText] = useState('');
  const [isFading, setIsFading] = useState(false);

  // 滚动引用
  const topRef = useRef(null);

  // 答题处理
  const handleAnswer = async (dimId) => {
    // 记录分数
    const newScores = { ...scores, [dimId]: scores[dimId] + 1 };
    setScores(newScores);

    // 触发转场动画
    setIsFading(true);
    await wait(300);

    const nextQ = qIndex + 1;

    // 检查插屏逻辑
    if (INTERSTITIALS[nextQ]) {
      setInterstitialText(INTERSTITIALS[nextQ]);
      setView('interstitial');
      setIsFading(false);
      await wait(3500); // 插屏停留时间
      setIsFading(true);
      await wait(300);
      setQIndex(nextQ);
      setView('quiz');
    } else if (nextQ < QUESTIONS.length) {
      setQIndex(nextQ);
    } else {
      // 答题结束
      calculateResult(newScores);
      return;
    }

    setIsFading(false);
  };

  // 计算结果
  const calculateResult = async (finalScores) => {
    setView('calculating');
    // 简单算法：取最高分
    let maxScore = -1;
    let maxId = 1;
    Object.entries(finalScores).forEach(([id, s]) => {
      if (s > maxScore) {
        maxScore = s;
        maxId = id;
      }
    });
    setResultId(maxId);
    
    // 模拟计算过程
    await wait(2500);
    setView('paywall');
  };

  // 验证兑换码
  const handleVerify = async () => {
    if (!code) return;
    setError('');
    
    try {
      const { data, error } = await supabase
        .from('redemption_codes')
        .select('*')
        .eq('code', code.trim())
        .single();

      if (error || !data) throw new Error('兑换码无效');
      if (data.is_used) throw new Error('兑换码已被使用');

      // 标记已使用
      await supabase
        .from('redemption_codes')
        .update({ is_used: true })
        .eq('id', data.id);

      setView('result');
      setTimeout(() => topRef.current?.scrollIntoView({ behavior: 'smooth' }), 100);

    } catch (err) {
      setError(err.message);
    }
  };

  return (
    <div className="min-h-screen text-gray-100 font-sans selection:bg-white/20 selection:text-white" ref={topRef}>
      <Head>
        <title>Inner Echo | 深度情感欲望测试</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
      </Head>
      
      <StarBackground />

      {/* Main Content Area */}
      <main className="relative z-10 min-h-screen flex flex-col items-center justify-center p-6">
        
        {/* VIEW: WELCOME */}
        {view === 'welcome' && (
          <div className="max-w-lg w-full text-center space-y-12 animate-fade-in">
            <div className="space-y-4">
              <div className="text-xs tracking-[0.3em] text-gray-500 uppercase">Deep Psychology Test</div>
              <h1 className="text-5xl md:text-6xl font-serif text-transparent bg-clip-text bg-gradient-to-b from-white to-gray-400">
                INNER ECHO
              </h1>
              <p className="text-gray-400 font-light tracking-wide text-sm md:text-base">
                听见潜意识的回响
              </p>
            </div>

            <div className="relative group cursor-pointer" onClick={() => setView('quiz')}>
              <div className="absolute inset-0 bg-white/5 rounded-full blur-xl group-hover:bg-white/10 transition-all duration-500" />
              <button className="relative px-12 py-4 border border-white/10 bg-black/20 backdrop-blur-md rounded-full text-sm tracking-widest hover:border-white/30 transition-all duration-300">
                START JOURNEY
              </button>
            </div>
            
            <div className="grid grid-cols-3 gap-8 pt-12 border-t border-white/5 text-center">
              {[
                { num: '48', label: '深度探针' },
                { num: '08', label: '情感维度' },
                { num: '15', label: '分钟旅程' },
              ].map((item, i) => (
                <div key={i} className="space-y-1">
                  <div className="font-serif text-2xl text-gray-300">{item.num}</div>
                  <div className="text-[10px] text-gray-600 uppercase tracking-wider">{item.label}</div>
                </div>
              ))}
            </div>
          </div>
        )}

        {/* VIEW: QUIZ */}
        {view === 'quiz' && (
          <div className={`max-w-xl w-full transition-opacity duration-300 ${isFading ? 'opacity-0' : 'opacity-100'}`}>
            <ProgressBar current={qIndex + 1} total={QUESTIONS.length} />
            
            <div className="min-h-[300px] flex flex-col justify-center mb-12">
              <h2 className="text-2xl md:text-3xl font-serif leading-relaxed text-gray-100 mb-8">
                {QUESTIONS[qIndex].text}
              </h2>
              
              <div className="space-y-3">
                {QUESTIONS[qIndex].options.map((opt, idx) => (
                  <button
                    key={idx}
                    onClick={() => handleAnswer(opt.v)}
                    className="w-full text-left p-5 rounded-xl border border-white/5 bg-white/[0.02] hover:bg-white/[0.06] hover:border-white/10 transition-all duration-200 group"
                  >
                    <div className="flex items-start gap-4">
                      <span className="text-xs font-mono text-gray-600 mt-1 group-hover:text-gray-400 transition-colors">
                        0{idx + 1}
                      </span>
                      <span className="text-sm md:text-base text-gray-300 group-hover:text-white font-light leading-relaxed">
                        {opt.t}
                      </span>
                    </div>
                  </button>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* VIEW: INTERSTITIAL (插屏) */}
        {view === 'interstitial' && (
          <div className="text-center animate-fade-in-slow">
            <div className="w-[1px] h-16 bg-gradient-to-b from-transparent via-white/50 to-transparent mx-auto mb-8" />
            <p className="font-serif text-xl md:text-2xl leading-loose text-gray-200 whitespace-pre-line">
              {interstitialText}
            </p>
          </div>
        )}

        {/* VIEW: CALCULATING */}
        {view === 'calculating' && (
          <div className="text-center space-y-6">
            <div className="relative w-16 h-16 mx-auto">
              <div className="absolute inset-0 border border-t-white/80 border-r-transparent border-b-transparent border-l-transparent rounded-full animate-spin" />
              <div className="absolute inset-2 border border-b-white/40 border-t-transparent border-r-transparent border-l-transparent rounded-full animate-spin-reverse" />
            </div>
            <p className="text-sm tracking-widest text-gray-400 animate-pulse">
              构建潜意识模型...
            </p>
          </div>
        )}

        {/* VIEW: PAYWALL */}
        {view === 'paywall' && (
          <div className="max-w-md w-full bg-white/[0.02] border border-white/10 backdrop-blur-xl p-8 md:p-12 rounded-2xl text-center space-y-8 animate-fade-in">
            <div className="w-12 h-12 bg-white/5 rounded-full flex items-center justify-center mx-auto text-gray-400">
              <Icons.Lock />
            </div>
            
            <div className="space-y-2">
              <h2 className="text-2xl font-serif text-white">测评已完成</h2>
              <p className="text-sm text-gray-400 leading-relaxed">
                您的情感欲望图谱已构建完毕。<br/>请输入兑换码以解锁完整深度报告。
              </p>
            </div>

            <div className="space-y-4">
              <input
                type="text"
                value={code}
                onChange={(e) => setCode(e.target.value)}
                placeholder="在此输入兑换码"
                className="w-full bg-black/40 border border-white/10 rounded-lg px-4 py-3 text-center text-white placeholder-gray-600 focus:outline-none focus:border-white/30 transition-colors tracking-widest"
              />
              
              <button
                onClick={handleVerify}
                disabled={!code}
                className="w-full py-3 bg-white text-black font-semibold rounded-lg hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
              >
                立即解锁
              </button>
              
              {error && (
                <p className="text-red-400 text-xs">{error}</p>
              )}
            </div>

            <div className="pt-6 border-t border-white/5">
              <p className="text-[10px] text-gray-600">
                INNER ECHO PRO · 深度心理分析
              </p>
            </div>
          </div>
        )}

        {/* VIEW: RESULT */}
        {view === 'result' && resultId && (
          <div className="max-w-3xl w-full animate-fade-in pb-20">
            {/* Header Totem */}
            <div className="text-center py-16 space-y-6">
              <div className="inline-block px-3 py-1 border border-white/20 rounded-full text-[10px] tracking-[0.2em] uppercase text-gray-400 mb-4">
                TYPE - 0{resultId}
              </div>
              <h1 className="text-4xl md:text-6xl font-serif text-white mb-2" style={{ color: RESULTS[resultId].accent }}>
                {RESULTS[resultId].title}
              </h1>
              <div className="w-12 h-[1px] bg-white/20 mx-auto" />
              <p className="text-lg md:text-xl font-light text-gray-300 italic px-8">
                “{RESULTS[resultId].quote}”
              </p>
            </div>

            {/* Keyword Card */}
            <div className="bg-white/[0.03] border border-white/10 rounded-2xl p-8 mb-12 text-center backdrop-blur-sm">
              <p className="text-xs text-gray-500 uppercase tracking-widest mb-2">CORE KEYWORD</p>
              <p className="text-3xl font-serif" style={{ color: RESULTS[resultId].accent }}>
                {RESULTS[resultId].keyword}
              </p>
            </div>

            {/* Content Sections */}
            <div className="space-y-12">
              {RESULTS[resultId].sections.map((section, idx) => (
                <div key={idx} className="space-y-4">
                  <h3 className="text-lg font-serif text-white/90 border-l-2 pl-4" style={{ borderColor: RESULTS[resultId].accent }}>
                    {section.t}
                  </h3>
